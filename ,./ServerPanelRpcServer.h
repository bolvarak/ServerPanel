#ifndef SERVERPANELRPCSERVER_H

///////////////////////////////////////////////////////////////////////////////
/// Definitions //////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////

#define SERVERPANELRPCSERVER_H
#define RPC_PORT 1597

///////////////////////////////////////////////////////////////////////////////
/// Headers //////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////

#include <QTcpServer>
#include <QTcpSocket>
#include <QtCore>
#include "ServerPanelRpc.h"

///////////////////////////////////////////////////////////////////////////////
/// ServerPanelRpcServer Definition //////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////

class ServerPanelRpcServer : public QTcpServer {
    // Make sure this is a QObject
    Q_OBJECT
// Public
public:
    // Singleton
    static ServerPanelRpcServer* Instance();
    // Methods
    void incomingConnection(int iSocket);
    void Pause             ();
    void Resume            ();
// Protected
protected :
    // Constructor
    ServerPanelRpcServer(QObject* cParent);
    // Properties
    bool                         bDisabled; // Tells the system whether the server is disabled or not
    static ServerPanelRpcServer* mInstance; // Singleton Instance
// Slots
protected slots :
    void DiscardClient();
    void ReadClient();
};

#endif // SERVERPANELRPCSERVER_H
